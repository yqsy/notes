---
title: 搭建比特币节点
date: 2018-02-01 13:29:12
categories: [business, bitcoin]
---

<!-- TOC -->

- [1. 基础设置](#1-基础设置)
- [2. server开发环境](#2-server开发环境)
- [3. 增加快捷指令](#3-增加快捷指令)
- [4. 桌面版环境](#4-桌面版环境)
- [5. 参考资料](#5-参考资料)

<!-- /TOC -->


<a id="markdown-1-基础设置" name="1-基础设置"></a>
# 1. 基础设置

```bash
sudo bash -c 'cat >> /etc/sudoers' << EOF
%  ALL=(ALL)       NOPASSWD: ALL
EOF

sudo apt-get install zsh git curl vim screen -y
sudo apt-get install python-pip python3-pip ipython ipython3 -y 

sudo chsh $(whoami) -s /bin/zsh
curl -L https://raw.githubusercontent.com/yqsy/vim/master/etc/zshrc.zsh > ~/.zshrc

# screen 配置
cat >> ~/.screenrc << EOF
# Enable mouse scrolling and scroll bar history scrolling
termcapinfo xterm* ti@:te@
EOF

# 拷贝证书

# 修改hostname
https://linuxize.com/post/how-to-change-hostname-on-ubuntu-18-04/

sudo hostnamectl set-hostname vm1
sudo vim /etc/cloud/cloud.cfg
preserve_hostname: true

# 设置网络
sudo vim /etc/netplan/...

network:
    ethernets:
        enp0s3:
            addresses: [192.168.1.2/24]
            gateway4: 192.168.1.1
            nameservers:
              addresses: [8.8.8.8,8.8.4.4]
            dhcp4: no
    version: 2
```

<a id="markdown-2-server开发环境" name="2-server开发环境"></a>
# 2. server开发环境


安装默认依赖:
```bash
sudo add-apt-repository universe
sudo apt-get update

sudo apt-get install build-essential libtool autotools-dev automake pkg-config libssl-dev libevent-dev bsdmainutils python3 libboost-system-dev libboost-filesystem-dev libboost-chrono-dev libboost-test-dev libboost-thread-dev -y

sudo apt-get install software-properties-common -y 
sudo add-apt-repository ppa:bitcoin/bitcoin
sudo apt-get update
sudo apt-get install libdb4.8-dev libdb4.8++-dev -y 

sudo apt-get install libminiupnpc-dev -y

sudo apt-get install libzmq3-dev -y 

sudo apt-get install libqt5gui5 libqt5core5a libqt5dbus5 qttools5-dev qttools5-dev-tools libprotobuf-dev protobuf-compiler -y

sudo apt-get install libqrencode-dev -y 
```

主机编译以及拷贝
```bash
cd /mnt/disk1/linux/reference/read/bitcoin
./autogen.sh && ./configure --enable-debug
make -j 8 && sudo make install

# scp 过去
scp /usr/local/bin/bitcoind yq@vm1:/tmp/bitcoind && scp /usr/local/bin/bitcoin-cli yq@vm1:/tmp/bitcoin-cli && scp /usr/local/bin/bitcoind yq@vm2:/tmp/bitcoind && scp /usr/local/bin/bitcoin-cli yq@vm2:/tmp/bitcoin-cli

# 切换到虚拟机拷贝到运行目录
sudo mv /tmp/bitcoind  /usr/local/bin/bitcoind && sudo mv /tmp/bitcoin-cli   /usr/local/bin/bitcoin-cli
```

<a id="markdown-3-增加快捷指令" name="3-增加快捷指令"></a>
# 3. 增加快捷指令
```bash

# 地址处理
wget -O ~/.bitcoinaddress.rc https://raw.githubusercontent.com/yqsy/notes/master/business/bitcoin/script/bitcoinaddress.rc

cat >> ~/.zshrc << EOF
source ~/.bitcoinaddress.rc
EOF

# rpc
wget -O ~/.bitcoincmd.rc https://raw.githubusercontent.com/yqsy/notes/master/business/bitcoin/script/bitcoincmd.rc

cat >> ~/.zshrc << EOF
source ~/.bitcoincmd.rc
EOF
```

<a id="markdown-4-桌面版环境" name="4-桌面版环境"></a>
# 4. 桌面版环境


```bash
sudo add-apt-repository ppa:bitcoin/bitcoin
sudo apt-get update
sudo apt-get install bitcoin-qt
```

<a id="markdown-5-参考资料" name="5-参考资料"></a>
# 5. 参考资料

* https://github.com/bitcoin/bitcoin/blob/0.17/doc/build-unix.md
* https://launchpad.net/~bitcoin/+archive/ubuntu/bitcoin
