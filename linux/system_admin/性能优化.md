---
title: 性能优化
date: 2017-10-29 19:36:43
categories: [linux, 系统管理]
---

<!-- TOC -->

- [1. 系统性能分析工具](#1-系统性能分析工具)
    - [1.1. sar](#11-sar)
- [2. 评判性能好坏准则](#2-评判性能好坏准则)

<!-- /TOC -->


<a id="markdown-1-系统性能分析工具" name="1-系统性能分析工具"></a>
# 1. 系统性能分析工具

```bash
# 内存分析
vmstat

yum -y install sysstat
systemctl start sysstat 
systemctl enable sysstat

# io分析
iostat

# sar 查看系统CPU整体的负载状态,每3秒统计一次,统计5次,可以使用以下组合
sar -u 3 5

# 系统的CPU计数是从0开始的,如果要查看第2颗CPU的运行负责,使用下面的组合
sar -P 1 3 5

# 查看系统磁盘的读写性能,可使用以下组合
sar -d 3 5

# 查看内存使用情况,网络运行状态
sar -r 5 2
sar -n DEV 5 3

# 检查cpu平均负载
uptime

# watch结合free
watch -n 3 -d free

# 检测网络接口状况
netstat -i

# 检测系统路由表信息
netstat -r
```

<a id="markdown-11-sar" name="11-sar"></a>
## 1.1. sar

* -A：显示系统所有资源设备（CPU、内存、磁盘）的运行状况。
* -u：显示系统所有CPU在采样时间内的负载状态
* -P：显示当前系统中指定CPU的使用情况
* -d：显示系统所有硬盘设备在采样时间内的使用状况
* -r：显示系统内存在采样时间内的使用状况
* -b：显示缓冲区在采样时间内的使用情况
* -v：显示进程、文件、I节点和锁表状态
* -n：显示网络运行状态
* -q：显示了运行队列的大小，它与系统当时的平均负载相同。
* -R：显示进程在采样时间内的活动情况
* -y：显示终端设备在采样时间内的活动情况
* -w：显示系统交换活动在采样时间内的状态
* -o filename 表示将命令结果 以二进制格式存放在文件中
* interval 表示采样间隔时间，是必须有的参数
* count 表示采样次数，是可选参数，默认值是1。

<a id="markdown-2-评判性能好坏准则" name="2-评判性能好坏准则"></a>
# 2. 评判性能好坏准则

![](http://ouxarji35.bkt.clouddn.com/snipaste_20171029_195046.png)
 